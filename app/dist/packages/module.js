const _0x1026=['values','manifestFile','socket','emit','isNewerVersion','data','title','reduce','../common/utils','getPackages','user','label','lang','minimumSystemVersion','Default','filter','path','getDefaultLanguageOptions','name','English','socketListeners','core','version','lang/en.json','concat','modules','broadcast','push','includes'];(function(_0x5404d6,_0x102637){const _0x62ce2b=function(_0x4f324b){while(--_0x4f324b){_0x5404d6['push'](_0x5404d6['shift']());}};_0x62ce2b(++_0x102637);}(_0x1026,0x1c5));const _0x62ce=function(_0x5404d6,_0x102637){_0x5404d6=_0x5404d6-0x0;let _0x62ce2b=_0x1026[_0x5404d6];return _0x62ce2b;};const {AbstractBasePackage}=require('./package');const util=require(_0x62ce('0x13'));class Module extends AbstractBasePackage{static get['collection'](){return'modules';}static get[_0x62ce('0xc')](){return'module.json';}static['getPackages']({system}={}){let _0x454ab3=super[_0x62ce('0x14')]();if(system){_0x454ab3=_0x454ab3[_0x62ce('0x1a')](_0x32637c=>{let _0x342e6e=_0x32637c[_0x62ce('0x10')]['systems'];let _0x103f46=_0x342e6e===undefined||_0x342e6e instanceof Array&&_0x342e6e[_0x62ce('0xa')](system['id']);if(!_0x103f46)return![];return!util[_0x62ce('0xf')](_0x32637c[_0x62ce('0x10')][_0x62ce('0x18')]||0x0,system[_0x62ce('0x4')]);});}return _0x454ab3;}static[_0x62ce('0x1c')](){const _0x2eed6a=this[_0x62ce('0x14')]();const _0xece07=_0x2eed6a[_0x62ce('0x12')]((_0x9f26dd,_0x5f163f)=>{if(!_0x5f163f['languages']['length'])return _0x9f26dd;for(let _0xd84326 of _0x5f163f['languages']){const _0x3a3260=_0x9f26dd[_0xd84326[_0x62ce('0x17')]]=_0x9f26dd[_0xd84326['lang']]||{'id':_0xd84326[_0x62ce('0x17')],'label':'','modules':[]};if(!_0x3a3260[_0x62ce('0x16')])_0x3a3260[_0x62ce('0x16')]=_0xd84326[_0x62ce('0x0')];_0x3a3260[_0x62ce('0x7')][_0x62ce('0x9')]({'id':_0x5f163f['id'],'label':_0x5f163f[_0x62ce('0x10')][_0x62ce('0x11')],'path':_0xd84326[_0x62ce('0x1b')]});}return _0x9f26dd;},{'en':{'id':'en','label':_0x62ce('0x1'),'modules':[{'id':_0x62ce('0x3'),'label':_0x62ce('0x19'),'path':_0x62ce('0x5')}]}});let _0x1de4e6=[_0xece07['en']];_0xece07['en'][_0x62ce('0x7')]=_0xece07['en'][_0x62ce('0x7')]['slice'](0x0,0x1);delete _0xece07['en'];return _0x1de4e6[_0x62ce('0x6')](Object[_0x62ce('0xb')](_0xece07));}static['socketListeners'](_0x3f0281){super[_0x62ce('0x2')](_0x3f0281);const _0x39a26a=game['world']['modules'][_0x62ce('0x1a')](_0x39a3dd=>_0x39a3dd['data'][_0x62ce('0xd')]);for(let _0x48d0ed of _0x39a26a){let _0x4bce82='module.'+_0x48d0ed[_0x62ce('0x10')]['name'];_0x3f0281['on'](_0x4bce82,(_0x3e38a9,_0x5ca0a8)=>{if(_0x5ca0a8 instanceof Function)_0x5ca0a8();_0x3f0281[_0x62ce('0x8')][_0x62ce('0xe')](_0x4bce82,_0x3e38a9,_0x3f0281[_0x62ce('0x15')]['_id']);});}}}module['exports']={'Module':Module};