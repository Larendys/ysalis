const _0x474d=['/game','worlds','systemVersion','../modules/activity.js','map','modules','start','activity','world.','updateActivePacks','user','reduce','world','error','role','messages','getRoute','coreVersion','items','absPath','User','folders','concat','packs','options','ready','shutdown','exports','\x20to\x20updated\x20core\x20platform\x20version\x20','AVAILABLE','catch','forEach','journal','scripts','../common/utils','\x20for\x20major\x20version\x20increase','getPackages','unavailable','entries','Macro','vend','Automatically\x20disabling\x20a','Scene','isGM','system','Setting','webrtc','getCompendium','slice','actors','push','_restrictAvailability','slugify','Migration\x20of\x20World\x20','getInvitationLinks','\x20was\x20successful\x20to\x20','resetPackages','styles','paused','getActiveContent','deactivate','systems/','_id','socket','users','routePrefix','migrateSystem','data','writeFileSync','Gamemaster','resetKeys','setup','files','permissions','broadcast','then','\x20System\x20version\x20','from','create','./system','requestWorldData','get','find','update','migrate','ChatMessage','getUpdateNotification','values','admin','Actor','\x20to\x20upgraded\x20','Folder','name','Item','\x20does\x20not\x20exist','macros','split','path','connect','_deletePack','password','action','\x20modules\x20in\x20world\x20','playlists','mkdirSync','version','disconnect','core.moduleConfiguration','updateChannel','REQUIRES_UPDATE','scenes','resetPackageCache','filter','express','You\x20must\x20provide\x20a\x20unique\x20id\x20that\x20names\x20this\x20World.','launch','background','demo','findSplice','./package','../common/constants','baseDir','disableModules','save','settings','length','mergeObject','deleteOne','constructor','coreUpdate','getPermissions','esmodules','combat','tables','port','migrateCore','core.rtcWorldSettings','package','moduleSettings','Disabling\x20all\x20modules\x20in\x20World\x20','isNewerVersion','GAMEMASTER','clientConfig','metadata','existsSync','_getPacks','all','../migrations','The\x20requested\x20user\x20ID\x20','socketListeners','set','session','join','availability','BaseCompendium','manifestFile','Migrating\x20World\x20','info','active','\x20does\x20not\x20seem\x20to\x20exist!'];(function(_0x13eeba,_0x474da2){const _0x5a856e=function(_0x253e92){while(--_0x253e92){_0x13eeba['push'](_0x13eeba['shift']());}};_0x5a856e(++_0x474da2);}(_0x474d,0xb7));const _0x5a85=function(_0x13eeba,_0x474da2){_0x13eeba=_0x13eeba-0x0;let _0x5a856e=_0x474d[_0x13eeba];return _0x5a856e;};const fs=require('fs');const path=require(_0x5a85('0x4a'));const {AbstractBasePackage}=require(_0x5a85('0x60'));const {Activity}=require(_0x5a85('0x8c'));const {System}=require(_0x5a85('0x38'));const {Module}=require('./module');const migrations=require(_0x5a85('0x7c'));const util=require(_0x5a85('0xb'));const {USER_ROLES,PACKAGE_AVAILABILITY_CODES}=require(_0x5a85('0x61'));class World extends AbstractBasePackage{constructor(_0x54ba3b){super(_0x54ba3b);this[_0x5a85('0x15')]=System[_0x5a85('0x3a')](this[_0x5a85('0x2c')][_0x5a85('0x15')]);this[_0x5a85('0x8e')]=Module[_0x5a85('0xd')]({'system':this[_0x5a85('0x15')]})[_0x5a85('0x59')](_0x32e6ce=>!_0x32e6ce[_0x5a85('0x2c')][_0x5a85('0xe')]);}[_0x5a85('0x7a')](_0x1007d6){return super['_getPacks'](_0x1007d6)[_0x5a85('0x8d')](_0xcc156=>{_0xcc156[_0x5a85('0x72')]=_0x5a85('0x95');return _0xcc156;});}static[_0x5a85('0x1c')](_0x1082c8){let _0x59a47b=null;try{_0x59a47b=System['get'](_0x1082c8[_0x5a85('0x15')]);}catch(_0x5d4765){}_0x1082c8['availability']=_0x59a47b?_0x59a47b[_0x5a85('0x2c')]['availability']:PACKAGE_AVAILABILITY_CODES['REQUIRES_SYSTEM'];_0x1082c8[_0x5a85('0xe')]=_0x1082c8[_0x5a85('0x82')]>PACKAGE_AVAILABILITY_CODES[_0x5a85('0x56')];}static get['collection'](){return _0x5a85('0x8a');}static get[_0x5a85('0x84')](){return'world.json';}get[_0x5a85('0x87')](){const {game}=global;return game['world']&&this['id']===game[_0x5a85('0x95')]['id'];}get[_0x5a85('0x5d')](){let _0x54b399=this['data'][_0x5a85('0x5d')];if(!_0x54b399&&this[_0x5a85('0x15')][_0x5a85('0x2c')]['background']){_0x54b399=_0x5a85('0x26')+this['system']['id']+'/'+this[_0x5a85('0x15')][_0x5a85('0x2c')]['background'];}return _0x54b399||null;}static[_0x5a85('0x37')](_0x49d545){if(!_0x49d545[_0x5a85('0x45')])throw new Error(_0x5a85('0x5b'));_0x49d545['name']=_0x49d545[_0x5a85('0x45')][_0x5a85('0x1d')]();const _0x2dceb2=path[_0x5a85('0x81')](this[_0x5a85('0x62')],_0x49d545[_0x5a85('0x45')]);if(fs[_0x5a85('0x79')](_0x2dceb2)){throw new Error('A\x20World\x20already\x20exists\x20in\x20the\x20requested\x20directory\x20'+_0x49d545['name']+'.');}fs[_0x5a85('0x51')](_0x2dceb2);fs['mkdirSync'](path[_0x5a85('0x81')](_0x2dceb2,_0x5a85('0x2c')));fs[_0x5a85('0x51')](path[_0x5a85('0x81')](_0x2dceb2,_0x5a85('0x57')));const _0x3fc932={'name':'','title':'','description':'','background':'','system':'','coreVersion':'','systemVersion':'','packs':[],'scripts':[],'styles':[],'nextSession':''};util[_0x5a85('0x67')](_0x3fc932,_0x49d545,{'insertValues':![],'insertKeys':![]});_0x3fc932['coreVersion']=global['ver'];const _0x200529=System['get'](_0x3fc932[_0x5a85('0x15')]);if(!_0x200529)throw new Error('The\x20requested\x20system\x20'+_0x3fc932[_0x5a85('0x15')]+_0x5a85('0x88'));_0x3fc932[_0x5a85('0x8b')]=_0x200529['version'];const _0x2f007a=new World(_0x3fc932);return _0x2f007a['save']();}static[_0x5a85('0x3c')](_0x598f24){delete _0x598f24[_0x5a85('0x4e')];const _0x1cfeee=this[_0x5a85('0x3a')](_0x598f24[_0x5a85('0x45')],{'strict':!![]});util['mergeObject'](_0x1cfeee['data'],_0x598f24,{'insertKeys':!![],'insertValues':![]});return _0x1cfeee[_0x5a85('0x64')]();}static async[_0x5a85('0x5c')](_0x380da8){const _0x295761=this[_0x5a85('0x3a')](_0x380da8,{'strict':!![]});await _0x295761[_0x5a85('0x30')]();return{'redirect':_0x5a85('0x89')};}['_createPack'](_0x31fd16){const _0x10df7b=path[_0x5a85('0x81')](this['path'],_0x5a85('0x0'));if(!fs[_0x5a85('0x79')](_0x10df7b))fs[_0x5a85('0x51')](_0x10df7b);_0x31fd16[_0x5a85('0x9c')]=path[_0x5a85('0x81')](game[_0x5a85('0x95')][_0x5a85('0x4a')],_0x31fd16[_0x5a85('0x4a')]);this[_0x5a85('0x2c')][_0x5a85('0x0')][_0x5a85('0x1b')](_0x31fd16);this[_0x5a85('0x64')]();this[_0x5a85('0x0')]=this[_0x5a85('0x7a')](this[_0x5a85('0x2c')][_0x5a85('0x0')]);}[_0x5a85('0x4c')](_0x5b47f9){this['data']['packs'][_0x5a85('0x5f')](_0x43fdd3=>_0x43fdd3[_0x5a85('0x45')]===_0x5b47f9);this[_0x5a85('0x64')]();this[_0x5a85('0x0')]=this[_0x5a85('0x7a')](this[_0x5a85('0x2c')][_0x5a85('0x0')]);}async['getActiveContent'](){const _0x1eb2e3=await global['db']['Setting']['get'](_0x5a85('0x54'))||{};const _0xe81caa=this[_0x5a85('0x8e')][_0x5a85('0x94')]((_0x32d397,_0x4bd671)=>{if(_0x1eb2e3[_0x4bd671['id']]===!![]){_0x32d397[_0x5a85('0xa')]=_0x32d397[_0x5a85('0xa')][_0x5a85('0x9f')](_0x4bd671[_0x5a85('0xa')]);_0x32d397[_0x5a85('0x6c')]=_0x32d397['esmodules'][_0x5a85('0x9f')](_0x4bd671[_0x5a85('0x6c')]);_0x32d397[_0x5a85('0x22')]=_0x32d397['styles'][_0x5a85('0x9f')](_0x4bd671[_0x5a85('0x22')]);_0x32d397['packs']=_0x32d397[_0x5a85('0x0')]['concat'](_0x4bd671[_0x5a85('0x0')]);}return _0x32d397;},{'scripts':[],'esmodules':[],'styles':[],'packs':[]});const _0x4c2467=this[_0x5a85('0x15')][_0x5a85('0xa')]['concat'](_0xe81caa[_0x5a85('0xa')])['concat'](this[_0x5a85('0xa')]);const _0x309ae4=this[_0x5a85('0x15')][_0x5a85('0x6c')][_0x5a85('0x9f')](_0xe81caa['esmodules'])[_0x5a85('0x9f')](this[_0x5a85('0x6c')]);const _0x773822=this[_0x5a85('0x15')][_0x5a85('0x22')][_0x5a85('0x9f')](_0xe81caa[_0x5a85('0x22')])[_0x5a85('0x9f')](this[_0x5a85('0x22')]);const _0x1fa822=this[_0x5a85('0x15')][_0x5a85('0x0')]['concat'](_0xe81caa[_0x5a85('0x0')])[_0x5a85('0x9f')](this['packs'])[_0x5a85('0x59')](_0x40a660=>{if(_0x40a660[_0x5a85('0x15')]){return _0x40a660[_0x5a85('0x15')]instanceof Array?_0x40a660['system']['includes'](this['system']['id']):_0x40a660['system']===this[_0x5a85('0x15')]['id'];}return!![];});return{'scripts':Array['from'](new Set(_0x4c2467)),'esmodules':Array[_0x5a85('0x36')](new Set(_0x309ae4)),'styles':Array[_0x5a85('0x36')](new Set(_0x773822)),'packs':_0x1fa822,'moduleSettings':_0x1eb2e3};}async['updateActivePacks'](){const _0x1232b8=await this[_0x5a85('0x24')]();for(let _0x4934c2 of _0x1232b8[_0x5a85('0x0')]){db[_0x5a85('0x83')][_0x5a85('0x18')](_0x4934c2);}}[_0x5a85('0x64')](){const _0x3390df=path['join'](this['path'],this[_0x5a85('0x69')][_0x5a85('0x84')]);fs[_0x5a85('0x2d')](_0x3390df,JSON['stringify'](this[_0x5a85('0x2c')],null,0x2));return this;}async[_0x5a85('0x30')](){const {game,db,express,ver,logger,options}=global;this[_0x5a85('0x58')]();game[_0x5a85('0x15')]=this['system'];game[_0x5a85('0x95')]=this;game[_0x5a85('0x87')]=!![];await db[_0x5a85('0x4b')]();game[_0x5a85('0x90')]=new Activity();game['users']=await db[_0x5a85('0x9d')]['getUsers']();game[_0x5a85('0x32')]=await db[_0x5a85('0x16')][_0x5a85('0x6b')]();const _0x47aaaa=game[_0x5a85('0x29')][_0x5a85('0x59')](_0x171863=>_0x171863[_0x5a85('0x97')]===USER_ROLES[_0x5a85('0x76')]);if(!_0x47aaaa[_0x5a85('0x66')]){let _0x20c078=game['users'][_0x5a85('0x3b')](_0x392de5=>_0x392de5['name']==='Gamemaster');if(!_0x20c078){let _0x5e34d0='';while(game[_0x5a85('0x29')]['find'](_0x27a3a3=>_0x27a3a3[_0x5a85('0x45')]===_0x5a85('0x2e')+_0x5e34d0)){_0x5e34d0=String((parseInt(_0x5e34d0)||0x0)+0x1);}_0x20c078=db['User'][_0x5a85('0x37')]({'name':_0x5a85('0x2e')+_0x5e34d0,'role':USER_ROLES[_0x5a85('0x76')]});}else _0x20c078['role']=USER_ROLES['GAMEMASTER'];await _0x20c078['save']();}if(this[_0x5a85('0x2c')][_0x5a85('0x63')]){logger[_0x5a85('0x86')](_0x5a85('0x74')+this['data']['name']);await db[_0x5a85('0x16')]['db'][_0x5a85('0x68')]({'key':_0x5a85('0x54')});delete this[_0x5a85('0x2c')]['disableModules'];this[_0x5a85('0x64')]();}if(this[_0x5a85('0x2c')][_0x5a85('0x2f')]){logger[_0x5a85('0x86')]('Resetting\x20all\x20user\x20access\x20keys\x20in\x20World\x20'+this['data'][_0x5a85('0x45')]);for(let _0x1f0955 of game['users']){_0x1f0955[_0x5a85('0x4d')]='';await _0x1f0955['save']();}delete this[_0x5a85('0x2c')][_0x5a85('0x2f')];this['save']();}game[_0x5a85('0x2')]=!![];game['paused']=!options[_0x5a85('0x5e')];await this[_0x5a85('0x92')]();const _0x5f40bf=await db[_0x5a85('0x16')][_0x5a85('0x3a')](_0x5a85('0x71'));await express['webrtc'][_0x5a85('0x8f')](_0x5f40bf);let _0x201a11=util[_0x5a85('0x75')](ver,this[_0x5a85('0x2c')][_0x5a85('0x9a')]);if(_0x201a11)await this[_0x5a85('0x70')]();let _0x412036=util[_0x5a85('0x75')](this[_0x5a85('0x15')][_0x5a85('0x2c')][_0x5a85('0x52')],this['data'][_0x5a85('0x8b')]);if(_0x412036)await this[_0x5a85('0x2b')]();}async[_0x5a85('0x25')](_0x3edf1e,{asAdmin=![]}={}){const {config,db,game,express}=global;let _0x48f87a=null;if(!asAdmin){if(!_0x3edf1e[_0x5a85('0x93')])return{'redirect':util[_0x5a85('0x99')](_0x5a85('0x81'),{'prefix':config['options'][_0x5a85('0x2a')]})};_0x48f87a=await db[_0x5a85('0x9d')]['findOne']({'_id':_0x3edf1e[_0x5a85('0x93')]});const _0x5316a0=_0x48f87a&&_0x48f87a[_0x5a85('0x14')]||_0x3edf1e[_0x5a85('0x80')]&&_0x3edf1e[_0x5a85('0x80')][_0x5a85('0x41')];if(!_0x5316a0)return{'redirect':util[_0x5a85('0x99')](_0x5a85('0x81'),{'prefix':config[_0x5a85('0x1')][_0x5a85('0x2a')]})};}express['io']['emit'](_0x5a85('0x3'),{'world':this['id'],'userId':_0x48f87a?_0x48f87a[_0x5a85('0x27')]:null});await global[_0x5a85('0x5a')][_0x5a85('0x17')]['stop']();db[_0x5a85('0x53')]();if(game[_0x5a85('0x90')])clearInterval(game['activity']['_heartbeat']);for(let _0x5b3b61 of Object['keys'](game))delete game[_0x5b3b61];game[_0x5a85('0x2')]=![];game['paused']=!![];this[_0x5a85('0x58')]();return{'redirect':util['getRoute'](_0x5a85('0x30'),{'prefix':config[_0x5a85('0x1')][_0x5a85('0x2a')]})};}async['migrateCore'](){const {ver,logger}=global;logger[_0x5a85('0x86')](_0x5a85('0x85')+this['id']+_0x5a85('0x5')+ver);const _0x2d04a2=this[_0x5a85('0x2c')]['coreVersion'][_0x5a85('0x49')]('.')[_0x5a85('0x19')](0x0,0x2)[_0x5a85('0x81')]('.');const _0x322482=ver[_0x5a85('0x49')]('.')['slice'](0x0,0x2)[_0x5a85('0x81')]('.');const _0x1c7b24=await db[_0x5a85('0x16')][_0x5a85('0x3a')]('core.moduleConfiguration');if(util[_0x5a85('0x75')](_0x322482,_0x2d04a2)){const _0x518c0f={};let _0x9ebbbd=0x0;for(let _0x42d3bb of Module[_0x5a85('0xd')]({'system':this[_0x5a85('0x15')]['id']})){const _0x3dfdc2=_0x42d3bb[_0x5a85('0x2c')][_0x5a85('0x82')]===PACKAGE_AVAILABILITY_CODES[_0x5a85('0x6')];if(_0x3dfdc2&&_0x1c7b24[_0x42d3bb['id']])_0x518c0f[_0x42d3bb['id']]=!![];else _0x9ebbbd++;}logger[_0x5a85('0x86')](_0x5a85('0x12')+_0x9ebbbd+_0x5a85('0x4f')+this['id']+_0x5a85('0xc'));await db[_0x5a85('0x16')][_0x5a85('0x7f')](_0x5a85('0x54'),_0x518c0f);}const _0x2fbbac=this['data'][_0x5a85('0x9a')];const _0x10a4cd=Object[_0x5a85('0xf')](migrations)[_0x5a85('0x94')]((_0x2d44a6,_0x7055dc)=>{if(util['isNewerVersion'](_0x7055dc[0x0],_0x2fbbac))_0x2d44a6=_0x2d44a6[_0x5a85('0x9f')](_0x7055dc[0x1]);return _0x2d44a6;},[]);for(let _0x4504f2 of _0x10a4cd){await _0x4504f2(this)[_0x5a85('0x7')](_0x5d308b=>logger[_0x5a85('0x96')](_0x5d308b));}this['data'][_0x5a85('0x9a')]=ver;await this[_0x5a85('0x64')]();}async[_0x5a85('0x2b')](){const {db,logger}=global;const _0x119653=this[_0x5a85('0x15')];logger[_0x5a85('0x86')]('Migrating\x20World\x20'+this['id']+_0x5a85('0x43')+_0x119653['id']+_0x5a85('0x35')+_0x119653[_0x5a85('0x52')]);await db[_0x5a85('0x42')]['migrate']();await db[_0x5a85('0x46')][_0x5a85('0x3d')]();await db[_0x5a85('0x13')][_0x5a85('0x3d')]();for(let _0x23de7c of Array[_0x5a85('0x36')](db[_0x5a85('0x0')][_0x5a85('0x40')]())[_0x5a85('0x59')](_0x1e57b1=>_0x1e57b1[_0x5a85('0x78')][_0x5a85('0x72')]===_0x5a85('0x95'))){await _0x23de7c['migrate']();}this[_0x5a85('0x2c')][_0x5a85('0x8b')]=_0x119653[_0x5a85('0x52')];await this[_0x5a85('0x64')]();logger[_0x5a85('0x86')](_0x5a85('0x1e')+this['id']+_0x5a85('0x20')+_0x119653['id']+_0x5a85('0x35')+_0x119653['version']);}[_0x5a85('0x58')](){System[_0x5a85('0x21')]();Module[_0x5a85('0x21')]();World[_0x5a85('0x21')]();}static[_0x5a85('0x7e')](_0x4d835e){super[_0x5a85('0x7e')](_0x4d835e);_0x4d835e['on'](_0x5a85('0x95'),_0x48d481=>this[_0x5a85('0x39')](_0x4d835e[_0x5a85('0x80')],_0x48d481));if(game[_0x5a85('0x95')][_0x5a85('0x2c')][_0x5a85('0x28')]){const _0x25b2a8=_0x5a85('0x91')+game[_0x5a85('0x95')][_0x5a85('0x2c')][_0x5a85('0x45')];_0x4d835e['on'](_0x25b2a8,(_0x11b695,_0x55ff66)=>{if(_0x55ff66 instanceof Function)_0x55ff66();_0x4d835e[_0x5a85('0x33')]['emit'](_0x25b2a8,_0x11b695,_0x4d835e['user'][_0x5a85('0x27')]);});}}static async[_0x5a85('0x39')](_0x354b56,_0x426f9f){const {demo,game,logger,ver}=global;if(!game[_0x5a85('0x95')])return _0x426f9f({});const _0x3eaba0=_0x354b56[_0x5a85('0x8a')][game['world']['id']];if(!_0x3eaba0)return _0x426f9f({'userId':null,'version':ver,'world':game[_0x5a85('0x95')][_0x5a85('0x2c')],'system':game[_0x5a85('0x95')][_0x5a85('0x15')],'modules':game[_0x5a85('0x95')][_0x5a85('0x8e')],'paused':game[_0x5a85('0x23')],'demo':demo});try{const _0x1b077c=await this[_0x5a85('0x11')](_0x3eaba0);logger[_0x5a85('0x86')]('Vending\x20world\x20data\x20to\x20User\x20'+_0x3eaba0);_0x426f9f(_0x1b077c);}catch(_0x558f40){logger[_0x5a85('0x96')](_0x558f40);_0x426f9f({});}}static async[_0x5a85('0x11')](_0x5899ef){const {config,db,demo,game,ver}=global;const _0x2f8bb5=game[_0x5a85('0x95')];const _0x3ea3a8={'userId':_0x5899ef,'version':ver,'world':game['world'][_0x5a85('0x2c')],'system':game['world']['system'],'modules':game[_0x5a85('0x95')][_0x5a85('0x8e')],'paused':game[_0x5a85('0x23')],'demo':demo,'addresses':config[_0x5a85('0x5a')][_0x5a85('0x1f')](),'files':config[_0x5a85('0x31')][_0x5a85('0x77')],'options':{'language':config[_0x5a85('0x1')]['language'],'port':config['options'][_0x5a85('0x6f')],'routePrefix':config[_0x5a85('0x1')]['routePrefix'],'updateChannel':config[_0x5a85('0x1')][_0x5a85('0x55')],'debug':config[_0x5a85('0x1')]['debug']}};_0x3ea3a8['world']['id']=game[_0x5a85('0x95')]['id'];const _0x37cb92=[];const _0x7a126b=await db[_0x5a85('0x9d')]['getUsers']();const _0x114b8f=_0x7a126b[_0x5a85('0x3b')](_0x471817=>_0x471817[_0x5a85('0x27')]===_0x5899ef);if(!_0x114b8f)throw new Error(_0x5a85('0x7d')+_0x5899ef+_0x5a85('0x47'));_0x7a126b[_0x5a85('0x8')](_0x3211a9=>{if((!_0x114b8f||!_0x114b8f[_0x5a85('0x14')])&&_0x5899ef!==_0x3211a9[_0x5a85('0x27')])delete _0x3211a9[_0x5a85('0x4d')];});_0x3ea3a8[_0x5a85('0x29')]=_0x7a126b;_0x37cb92[_0x5a85('0x1b')](db[_0x5a85('0x3e')][_0x5a85('0x3b')]({},{'sort':{'timestamp':0x1}})[_0x5a85('0x34')](_0x37de19=>_0x3ea3a8[_0x5a85('0x98')]=_0x37de19));_0x37cb92['push'](db[_0x5a85('0x13')][_0x5a85('0x3b')]({},{'sort':{'name':0x1}})['then'](_0x23e8ff=>_0x3ea3a8[_0x5a85('0x57')]=_0x23e8ff));_0x37cb92[_0x5a85('0x1b')](db[_0x5a85('0x42')][_0x5a85('0x3b')]({},{'sort':{'name':0x1}})[_0x5a85('0x34')](_0xdbebbc=>_0x3ea3a8[_0x5a85('0x1a')]=_0xdbebbc));_0x37cb92['push'](db[_0x5a85('0x46')][_0x5a85('0x3b')]({},{'sort':{'name':0x1}})[_0x5a85('0x34')](_0x36f271=>_0x3ea3a8[_0x5a85('0x9b')]=_0x36f271));_0x37cb92[_0x5a85('0x1b')](db['JournalEntry'][_0x5a85('0x3b')]({},{})['then'](_0x551622=>_0x3ea3a8[_0x5a85('0x9')]=_0x551622));_0x37cb92[_0x5a85('0x1b')](db['Combat'][_0x5a85('0x3b')]({},{})[_0x5a85('0x34')](_0x4c7aea=>_0x3ea3a8[_0x5a85('0x6d')]=_0x4c7aea));_0x37cb92[_0x5a85('0x1b')](db['Playlist'][_0x5a85('0x3b')]({},{'sort':{'name':0x1}})['then'](_0x2b0d1b=>_0x3ea3a8[_0x5a85('0x50')]=_0x2b0d1b));_0x37cb92[_0x5a85('0x1b')](db[_0x5a85('0x10')][_0x5a85('0x3b')]({},{})[_0x5a85('0x34')](_0x5106dd=>_0x3ea3a8[_0x5a85('0x48')]=_0x5106dd));_0x37cb92[_0x5a85('0x1b')](db['RollTable']['find']({},{'sort':{'name':0x1}})['then'](_0x578471=>_0x3ea3a8[_0x5a85('0x6e')]=_0x578471));_0x37cb92['push'](db[_0x5a85('0x44')][_0x5a85('0x3b')]({},{'sort':{'name':0x1}})['then'](_0x13556e=>_0x3ea3a8[_0x5a85('0x9e')]=_0x13556e));_0x37cb92['push'](db[_0x5a85('0x16')][_0x5a85('0x3b')]({},{})[_0x5a85('0x34')](_0x324bcb=>_0x3ea3a8[_0x5a85('0x65')]=_0x324bcb));_0x37cb92['push'](config['updater'][_0x5a85('0x3f')]()[_0x5a85('0x34')](_0x53dbc2=>_0x3ea3a8[_0x5a85('0x6a')]=_0x53dbc2));await Promise[_0x5a85('0x7b')](_0x37cb92);const _0x35088e=await _0x2f8bb5['getActiveContent']();_0x3ea3a8[_0x5a85('0x0')]=_0x35088e['packs'];for(let _0x5a8b9c of _0x3ea3a8[_0x5a85('0x8e')]){_0x5a8b9c['active']=_0x35088e[_0x5a85('0x73')][_0x5a8b9c[_0x5a85('0x2c')][_0x5a85('0x45')]]||![];}return _0x3ea3a8;}}module[_0x5a85('0x4')]={'World':World};