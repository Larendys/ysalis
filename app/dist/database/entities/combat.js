const _0x4e2f=['includes','hasRole','Scene','canUpdate','turn','canCreate','The\x20provided\x20media\x20file\x20does\x20not\x20have\x20a\x20valid\x20image\x20file\x20extension.','round','_id','PLAYER','hidden','img','initiative','combatants','active','isGM','mergeObject','ASSISTANT','every','defeated','preSave','keys','scene','schema','../odm/embedded','./scene','metadata','advanceTime','name','Setting','../odm/validators','../../common/utils'];(function(_0x304263,_0x4e2f13){const _0x25ed50=function(_0xd53928){while(--_0xd53928){_0x304263['push'](_0x304263['shift']());}};_0x25ed50(++_0x4e2f13);}(_0x4e2f,0x12e));const _0x25ed=function(_0x304263,_0x4e2f13){_0x304263=_0x304263-0x0;let _0x25ed50=_0x4e2f[_0x304263];return _0x25ed50;};const util=require(_0x25ed('0x11'));const Entity=require('../odm/entity');const EmbeddedDocument=require(_0x25ed('0xa'));const Validators=require(_0x25ed('0x10'));class Combatant extends EmbeddedDocument{static get[_0x25ed('0x9')](){const _0xed286d=super['schema'];_0xed286d['tokenId']={'type':String,'required':![]};_0xed286d[_0x25ed('0xe')]={'type':String,'required':![]};_0xed286d[_0x25ed('0x1d')]={'type':String,'required':![],'validate':_0x3aa8dc=>Validators['hasImageExtension'](_0x3aa8dc),'validationError':_0x25ed('0x18')};_0xed286d['initiative']={'type':Number,'required':![]};_0xed286d[_0x25ed('0x1c')]={'type':Boolean,'required':![]};_0xed286d[_0x25ed('0x5')]={'type':Boolean,'required':![]};return _0xed286d;}static get[_0x25ed('0xc')](){return util[_0x25ed('0x2')](super[_0x25ed('0xc')],{'parent':Combat,'collection':_0x25ed('0x1f')});}static[_0x25ed('0x17')](_0x34494e,_0x25ba0b,_0x29c507){return _0x34494e[_0x25ed('0x13')](_0x25ed('0x1b'));}static[_0x25ed('0x15')](_0x343be9,_0x3f13f5,_0xafd92,_0x2d0fee){if(_0x343be9['hasRole'](_0x25ed('0x3')))return!![];if(Object[_0x25ed('0x7')](_0x2d0fee)['every'](_0x552ba8=>[_0x25ed('0x1a'),_0x25ed('0x1e')][_0x25ed('0x12')](_0x552ba8))){return _0x343be9[_0x25ed('0x13')](_0x25ed('0x1b'));}return![];}}class Combat extends Entity{static get[_0x25ed('0x9')](){const _0x2f5564=super[_0x25ed('0x9')];delete _0x2f5564[_0x25ed('0xe')];delete _0x2f5564['folder'];_0x2f5564[_0x25ed('0x8')]={'type':Scene,'required':!![]};_0x2f5564[_0x25ed('0x1f')]={'type':[Combatant],'required':!![],'default':[]};_0x2f5564[_0x25ed('0x0')]={'type':Boolean,'required':!![],'default':![]};_0x2f5564[_0x25ed('0x19')]={'type':Number,'required':!![],'default':0x0};_0x2f5564[_0x25ed('0x16')]={'type':Number,'required':!![],'default':0x0};return _0x2f5564;}static get[_0x25ed('0xc')](){return util[_0x25ed('0x2')](super[_0x25ed('0xc')],{'collection':'combat','embeddedEntities':{'Combatant':Combatant}});}static[_0x25ed('0x15')](_0x3c2f3e,_0x407abb,_0x1552df){if(_0x3c2f3e[_0x25ed('0x1')])return!![];if(Object[_0x25ed('0x7')](_0x1552df)[_0x25ed('0x4')](_0x21e37a=>[_0x25ed('0x1a'),_0x25ed('0x19'),_0x25ed('0x16')]['includes'](_0x21e37a))){return _0x3c2f3e[_0x25ed('0x13')](_0x25ed('0x1b'));}else return![];}async[_0x25ed('0x6')](_0x37e9ba={}){await super[_0x25ed('0x6')](_0x37e9ba);if(_0x37e9ba[_0x25ed('0xd')])db[_0x25ed('0xf')][_0x25ed('0xd')](_0x37e9ba[_0x25ed('0xd')]);}}module['exports']={'Combat':Combat};const Scene=require(_0x25ed('0xb'))[_0x25ed('0x14')];