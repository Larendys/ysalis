const _0x49d1=['fillAlpha','Invalid\x20Drawing\x20fill\x20type\x20requested','fontSize','preSave','valueInArray','fillType','textColor','NONE','../../common/utils','canDelete','bezierFactor','every','strokeWidth','Invalid\x20Array\x20of\x20drawing\x20points\x20provided','../odm/validators','strokeAlpha','_id','drawings','text','metadata','between','Drawing\x20text\x20color\x20must\x20be\x20a\x20valid\x20CSS\x20color\x20string.','height','The\x20provided\x20drawing\x20texture\x20does\x20not\x20have\x20a\x20valid\x20image\x20extension.','DRAWING_CREATE','schema','canUpdate','../odm/embedded','strokeColor','Your\x20Drawing\x20must\x20have\x20either\x20a\x20visible\x20line,\x20visible\x20fill,\x20or\x20visible\x20text','hasImageExtension','width','../entities/user','points','hidden','Drawing\x20fill\x20color\x20must\x20be\x20a\x20valid\x20CSS\x20color\x20string.','isColorString','fontFamily','number','Drawing\x20stroke\x20color\x20must\x20be\x20a\x20valid\x20CSS\x20color\x20string.','locked','length','author','values','Signika','texture','canCreate'];(function(_0x1edd36,_0x49d10f){const _0x3cb7be=function(_0x51ddbd){while(--_0x51ddbd){_0x1edd36['push'](_0x1edd36['shift']());}};_0x3cb7be(++_0x49d10f);}(_0x49d1,0xe5));const _0x3cb7=function(_0x1edd36,_0x49d10f){_0x1edd36=_0x1edd36-0x0;let _0x3cb7be=_0x49d1[_0x1edd36];return _0x3cb7be;};const {DRAWING_TYPES,DRAWING_FILL_TYPES,DRAWING_DEFAULT_VALUES}=require('../../common/constants');const EmbeddedDocument=require(_0x3cb7('0x21'));const Validators=require(_0x3cb7('0x14'));const User=require(_0x3cb7('0x26'));const util=require(_0x3cb7('0xe'));class Drawing extends EmbeddedDocument{static get['schema'](){const _0x478cdf=super[_0x3cb7('0x1f')];_0x478cdf['type']={'type':String,'required':!![],'validate':_0x15dcf5=>Validators['valueInArray'](_0x15dcf5,Object['values'](DRAWING_TYPES)),'validationError':'Invalid\x20Drawing\x20type\x20requested'};_0x478cdf['author']={'type':User,'required':!![]};_0x478cdf['x']={'type':Number,'required':!![]};_0x478cdf['y']={'type':Number,'required':!![]};_0x478cdf[_0x3cb7('0x25')]={'type':Number,'required':!![]};_0x478cdf[_0x3cb7('0x1c')]={'type':Number,'required':!![]};_0x478cdf['rotation']={'type':Number,'required':!![]};_0x478cdf['z']={'type':Number,'required':!![]};_0x478cdf[_0x3cb7('0x28')]={'type':Boolean,'required':!![]};_0x478cdf[_0x3cb7('0x2e')]={'type':Boolean,'required':!![]};_0x478cdf[_0x3cb7('0x27')]={'type':[Array],'required':!![],'default':[],'validate':_0x42c577=>_0x42c577[_0x3cb7('0x11')](_0x1b928a=>_0x1b928a instanceof Array&&_0x1b928a[_0x3cb7('0x0')]===0x2&&_0x1b928a[_0x3cb7('0x11')](_0x504a16=>typeof _0x504a16===_0x3cb7('0x2c'))),'validationError':_0x3cb7('0x13')};_0x478cdf[_0x3cb7('0x10')]={'type':Number,'required':!![]};_0x478cdf[_0x3cb7('0xb')]={'type':Number,'required':!![],'validate':_0x5d0d5a=>Validators[_0x3cb7('0xa')](_0x5d0d5a,Object[_0x3cb7('0x2')](DRAWING_FILL_TYPES)),'validationError':_0x3cb7('0x7')};_0x478cdf['fillColor']={'type':String,'required':![],'validate':Validators[_0x3cb7('0x2a')],'validationError':_0x3cb7('0x29')};_0x478cdf[_0x3cb7('0x6')]={'type':Number,'required':![],'validate':_0x4ad007=>_0x4ad007[_0x3cb7('0x1a')](0x0,0x1)};_0x478cdf[_0x3cb7('0x12')]={'type':Number,'required':!![],'validate':_0x4f08f5=>_0x4f08f5>=0x0};_0x478cdf[_0x3cb7('0x22')]={'type':String,'required':![],'validate':Validators[_0x3cb7('0x2a')],'validationError':_0x3cb7('0x2d')};_0x478cdf[_0x3cb7('0x15')]={'type':Number,'required':!![],'validate':_0x1e4196=>_0x1e4196[_0x3cb7('0x1a')](0x0,0x1)};_0x478cdf[_0x3cb7('0x4')]={'type':String,'required':![],'validate':_0x2fc4e1=>Validators[_0x3cb7('0x24')](_0x2fc4e1),'validationError':_0x3cb7('0x1d')};_0x478cdf[_0x3cb7('0x18')]={'type':String,'required':![]};_0x478cdf[_0x3cb7('0x2b')]={'type':String,'required':!![],'default':_0x3cb7('0x3')};_0x478cdf[_0x3cb7('0x8')]={'type':Number,'required':!![],'validate':_0x31118e=>_0x31118e['between'](0x8,0x80)};_0x478cdf[_0x3cb7('0xc')]={'type':String,'required':!![],'validate':Validators[_0x3cb7('0x2a')],'validationError':_0x3cb7('0x1b')};_0x478cdf['textAlpha']={'type':Number,'required':!![]};for(let [_0x12fa46,_0x5d429f]of Object['entries'](DRAWING_DEFAULT_VALUES)){if(_0x12fa46 in _0x478cdf){_0x478cdf[_0x12fa46]['default']=_0x5d429f;}}return _0x478cdf;}static get[_0x3cb7('0x19')](){return util['mergeObject'](super['metadata'],{'collection':_0x3cb7('0x17')});}async[_0x3cb7('0x9')](){let _0x14f979=this[_0x3cb7('0x12')]>0x0&&this[_0x3cb7('0x15')]>0x0;if(!_0x14f979&&this[_0x3cb7('0xb')]===DRAWING_FILL_TYPES[_0x3cb7('0xd')]&&this[_0x3cb7('0x18')]===''){throw new Error(_0x3cb7('0x23'));}}static[_0x3cb7('0x5')](_0x3568ab,_0x4a9ab5,_0x5b1f3e){return _0x3568ab['hasPermission'](_0x3cb7('0x1e'));}static[_0x3cb7('0x20')](_0x5eefde,_0x3dbcb8,_0x172cb3,_0x425ceb){if(_0x5eefde['isGM'])return!![];return _0x172cb3[_0x3cb7('0x1')]===_0x5eefde[_0x3cb7('0x16')];}static[_0x3cb7('0xf')](_0x28d36e,_0x55123f,_0x594290){if(_0x28d36e['isGM'])return!![];return _0x594290[_0x3cb7('0x1')]===_0x28d36e[_0x3cb7('0x16')];}}module['exports']={'Drawing':Drawing};