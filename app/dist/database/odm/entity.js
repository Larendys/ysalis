const _0x1422=['canDelete','data','type','metadata','entityTypes','isFinite','isGM','ENTITY_PERMISSIONS','_updateDataModel','max','name','You\x20must\x20define\x20a\x20valid\x20','sort','mergeObject','../entities/folder','customDataModel','find','NONE','__esModule','hasRole','length','schema','hasPerm','constructor','./document','__importDefault','OWNER','preSave','../../const','map','default','isInteger','Entity\x20sort\x20order\x20must\x20be\x20an\x20integer','folder','system','SORT_INTEGER_DENSITY','permission','ASSISTANT','canUpdate','model','includes','flags','defineProperty','hasOwnProperty','_id'];(function(_0x62552e,_0x14220a){const _0x200656=function(_0x1362d3){while(--_0x1362d3){_0x62552e['push'](_0x62552e['shift']());}};_0x200656(++_0x14220a);}(_0x1422,0x7d));const _0x2006=function(_0x62552e,_0x14220a){_0x62552e=_0x62552e-0x0;let _0x200656=_0x1422[_0x62552e];return _0x200656;};'use strict';var __importDefault=this&&this[_0x2006('0x23')]||function(_0x339840){return _0x339840&&_0x339840[_0x2006('0x1c')]?_0x339840:{'default':_0x339840};};Object[_0x2006('0x7')](exports,_0x2006('0x1c'),{'value':!![]});const util=require('../../common/utils');const document_1=__importDefault(require(_0x2006('0x22')));const const_1=require(_0x2006('0x26'));class Entity extends document_1['default']{static get['schema'](){const _0x17f3f7=super[_0x2006('0x1f')];const _0x18df2c=this[_0x2006('0xd')];_0x17f3f7[_0x2006('0x14')]={'type':String,'required':!![]};_0x17f3f7['permission']={'type':Object,'required':!![],'default':{'default':const_1[_0x2006('0x11')][_0x2006('0x1b')]}};if(_0x18df2c[_0x2006('0xe')][_0x2006('0x1e')]){_0x17f3f7[_0x2006('0xc')]={'type':String,'required':!![],'validate':_0x3ecddd=>_0x18df2c['entityTypes'][_0x2006('0x5')](_0x3ecddd),'validationError':_0x2006('0x15')+this['name']+'\x20type'};}if(_0x18df2c[_0x2006('0x19')]){_0x17f3f7[_0x2006('0xb')]={'type':Object,'required':!![],'default':_0x4df21a=>game['system'][_0x2006('0x4')][this['name']][_0x4df21a[_0x2006('0xc')]]};}_0x17f3f7[_0x2006('0x2b')]={'type':Folder,'required':![]};_0x17f3f7[_0x2006('0x16')]={'type':Number,'required':![],'validate':_0x46da89=>Number[_0x2006('0x29')](_0x46da89),'validationError':_0x2006('0x2a')};_0x17f3f7[_0x2006('0x6')]={'type':Object,'required':![],'default':{}};return _0x17f3f7;}static get[_0x2006('0xd')](){return util[_0x2006('0x17')](super['metadata'],{'customDataModel':![],'entityTypes':[]});}async[_0x2006('0x25')](_0x36cccc){if(!Number[_0x2006('0xf')](this['sort'])){const _0x45a2ba=await this['constructor'][_0x2006('0x1a')]({'folder':this[_0x2006('0x2b')]});const _0x175450=_0x45a2ba[_0x2006('0x1e')]?Math[_0x2006('0x13')](..._0x45a2ba[_0x2006('0x27')](_0xa6a394=>_0xa6a394[_0x2006('0x16')]||0x0)):0x1;this[_0x2006('0x16')]=_0x175450+const_1[_0x2006('0x0')];}}static['create'](_0x31bbe1,_0x135030){const _0x15e27d=super['create'](_0x31bbe1,_0x135030);if(_0x135030[_0x2006('0x9')]&&_0x2006('0x1')in this['schema']){_0x15e27d['permission'][_0x135030[_0x2006('0x9')]]=const_1[_0x2006('0x11')]['OWNER'];}if(this['metadata']['customDataModel'])_0x15e27d[_0x2006('0x12')]();return _0x15e27d;}[_0x2006('0x12')]({insertKeys=![],insertValues=!![],enforceTypes=![]}={}){if(!(_0x2006('0xb')in this[_0x2006('0x1f')]))return;const _0x515e4b=game[_0x2006('0x2c')][_0x2006('0x4')][this[_0x2006('0x21')][_0x2006('0x14')]][this['type']];if(!_0x515e4b)return this[_0x2006('0xb')];this['data']=util['mergeObject'](_0x515e4b,this[_0x2006('0xb')],{'insertKeys':insertKeys,'insertValues':insertValues,'overwrite':!![],'inplace':![],'enforceTypes':enforceTypes});}[_0x2006('0x20')](_0x75e8be,_0x40ce0a,_0x73a303=![]){let _0x20ff82=_0x75e8be[_0x2006('0x9')]?this['permission'][_0x75e8be[_0x2006('0x9')]]:0x0;_0x20ff82=Number[_0x2006('0x29')](_0x20ff82)?_0x20ff82:this[_0x2006('0x1')]['default'];const _0x4afa94=const_1[_0x2006('0x11')][_0x40ce0a];if(_0x73a303)return _0x20ff82===_0x4afa94;else if(_0x75e8be[_0x2006('0x10')])return!![];return _0x20ff82>=_0x4afa94;}static[_0x2006('0x3')](_0x391c3d,_0x2f112f,_0x478676){if(_0x391c3d['hasRole']('ASSISTANT'))return!![];if(_0x478676[_0x2006('0x8')](_0x2006('0x1')))return![];return _0x2f112f[_0x2006('0x20')](_0x391c3d,_0x2006('0x24'));}static[_0x2006('0xa')](_0x5279ea,_0x286a9f){return _0x5279ea[_0x2006('0x1d')](_0x2006('0x2'))&&_0x286a9f['hasPerm'](_0x5279ea,'OWNER');}}exports[_0x2006('0x28')]=Entity;module['exports']=Entity;const {Folder}=require(_0x2006('0x18'));