const _0x3446=['length','scene','collection','pop','explored','PLAYER','hasRole','_id','ASSISTANT','../odm/document','_onDelete','deleteMany','canDelete','positions','timestamp','../entities/scene','broadcast','canCreate','You\x20cannot\x20reset\x20Fog\x20of\x20War\x20for\x20this\x20scene','canUpdate','user','schema'];(function(_0x71c81b,_0x3446f2){const _0x5a0aab=function(_0x2b0706){while(--_0x2b0706){_0x71c81b['push'](_0x71c81b['shift']());}};_0x5a0aab(++_0x3446f2);}(_0x3446,0x81));const _0x5a0a=function(_0x71c81b,_0x3446f2){_0x71c81b=_0x71c81b-0x0;let _0x5a0aab=_0x3446[_0x71c81b];return _0x5a0aab;};const Document=require(_0x5a0a('0xc'));class FogExploration extends Document{static get[_0x5a0a('0x2')](){const _0x474578=super[_0x5a0a('0x2')];_0x474578[_0x5a0a('0x4')]={'type':Scene,'required':!![]};_0x474578[_0x5a0a('0x1')]={'type':User,'required':!![]};_0x474578[_0x5a0a('0x7')]={'type':String,'required':![]};_0x474578[_0x5a0a('0x10')]={'type':Object,'required':!![],'default':{}};_0x474578[_0x5a0a('0x11')]={'type':Number,'required':!![],'default':0x0};return _0x474578;}static get[_0x5a0a('0x5')](){return'fog';}static[_0x5a0a('0x14')](_0x10549d,_0x43e26c){return _0x10549d[_0x5a0a('0x9')](_0x5a0a('0x8'));}static[_0x5a0a('0x0')](_0x42217f,_0x34ac1a){return _0x42217f[_0x5a0a('0xa')]===_0x34ac1a[_0x5a0a('0x1')]||_0x42217f['hasRole'](_0x5a0a('0xb'));}static[_0x5a0a('0xf')](_0x250bcf,_0x32933f){return _0x250bcf[_0x5a0a('0xa')]===_0x32933f[_0x5a0a('0x1')]||_0x250bcf['hasRole']('ASSISTANT');}static async['_onGet'](..._0x45aa1f){const _0x384ce9=await super['_onGet'](..._0x45aa1f);const _0x8585=_0x384ce9[_0x5a0a('0x3')]?_0x384ce9[_0x5a0a('0x6')]():null;if(_0x384ce9[_0x5a0a('0x3')]){this['db'][_0x5a0a('0xe')]({'_id':{'$in':_0x384ce9['map'](_0x2e1b5=>_0x2e1b5[_0x5a0a('0xa')])}});}return _0x8585;}static async[_0x5a0a('0xd')](_0x27fede,_0x2d78c2,_0x1c4aaf){if(_0x1c4aaf['reset']){_0x1c4aaf[_0x5a0a('0x13')]=!![];if(!_0x27fede[_0x5a0a('0x9')](_0x5a0a('0xb')))throw new Error(_0x5a0a('0x15'));await this['db']['deleteMany'](_0x2d78c2);_0x2d78c2['reset']=!![];return _0x2d78c2;}return super[_0x5a0a('0xd')](_0x27fede,_0x2d78c2,_0x1c4aaf);}}module['exports']={'FogExploration':FogExploration};const {Scene}=require(_0x5a0a('0x12'));const User=require('../entities/user');